(function(){"use strict";var e={9694:function(e,l,a){var s=a(9242),o=a(3396),t=a(7139),i=a(4870),n=(a(7658),{profile:{name:"Iniciar sesión como administrador",img:"stellarium.jpeg",onClick(e){localStorage.getItem("userToken")?e.push("/usuario"):e.push("/administracion")}},logout:{name:"Pechar sesión",img:"stellarium.jpeg",onClick(e){localStorage.clear(),window.location.reload()}},setProfileName(e){this.profile.name=e||"Iniciar sesión"},created(){const e=localStorage.getItem("userData");if(e){const l=JSON.parse(e).name;this.setProfileName(l)}else this.setProfileName(null)},items:[{id:0,title:"Inicio",icon:"fa-house-user",onClick(e){e.push("/inicio")}},{id:1,title:"Información de Corpos Celestes",icon:"fa-circle-info",onClick(e){e.push("/info-figuras")}},{id:2,title:"Iniciativas/Agrupacións",icon:"fa-people-group",onClick(e){e.push("/iniciativas")}},{id:3,title:"Curiosidades",icon:"fa-circle-question",onClick(e){e.push("/curiosidades")}},{id:4,title:"Arte e Astronomía",icon:"fa-moon",onClick(e){e.push("/arte-astronomia")}},{id:5,title:"Galería de Imaxes",icon:"fa-images",onClick(e){e.push("/galeria-imaxes")}}]}),r=a(2483);const c={class:"item"},u={class:"icon"},m={key:0,class:"title"};var d={__name:"MenuItem",props:["item","collapsed"],setup(e){const l=e,a=(0,r.tv)();return(n,r)=>{const d=(0,o.up)("font-awesome-icon");return(0,o.wg)(),(0,o.iD)("a",{href:"#",onClick:r[0]||(r[0]=(0,s.iM)((e=>l.item.onClick((0,i.SU)(a))),["prevent"]))},[(0,o._)("div",c,[(0,o._)("div",u,[(0,o.Wm)(d,{icon:["fa-solid",l.item.icon],size:"2x"},null,8,["icon"])]),e.collapsed?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",m,(0,t.zw)(l.item.title),1))])])}}},g=a(89);const p=(0,g.Z)(d,[["__scopeId","data-v-52a66413"]]);var v=p;const h={class:"header"},w={class:"profile"},k=["src"],b={key:0,class:"profile-name"},f={class:"menu-items"};var _={__name:"Menu",emits:["menuCollapsed"],setup(e,{emit:l}){let a=(0,i.iH)(JSON.parse(localStorage.getItem("menuCollapsed"))||!1);const c=()=>{a.value=JSON.parse(localStorage.getItem("menuCollapsed"))||!1,a.value=!a.value,l("menuCollapsed")},u=(0,r.tv)(),m=()=>{localStorage.clear()},d=(0,i.iH)(!1);(0,o.bv)((()=>{d.value=null!==localStorage.getItem("userToken")})),(0,o.Jd)((()=>{window.removeEventListener("beforeunload",m)})),window.addEventListener("beforeunload",m);const g=()=>{};return(0,o.YP)((()=>u.currentRoute.value.fullPath),((e,l)=>{e!==l&&g()})),(e,l)=>{const r=(0,o.up)("font-awesome-icon");return(0,o.wg)(),(0,o.iD)("div",{class:(0,t.C_)(["menu",(0,i.SU)(a)?"collapsed":"expanded"])},[(0,o._)("div",h,[(0,o._)("button",{class:"menu-button",onClick:c},[(0,o.Wm)(r,{icon:"fa-solid fa-bars",size:"2x"})])]),(0,o._)("div",w,[(0,o._)("img",{src:"../assets/"+(0,i.SU)(n).profile.img,alt:"profile image"},null,8,k),(0,i.SU)(a)?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",b,[(0,o._)("a",{class:"profile-link",href:"#",onClick:l[0]||(l[0]=(0,s.iM)((e=>(0,i.SU)(n).profile.onClick((0,i.SU)(u))),["prevent"]))},[(0,o.Uk)((0,t.zw)((0,i.SU)(n).profile.name)+" ",1),(0,o.Wm)(r,{icon:"fa-solid fa-user"})]),d.value?((0,o.wg)(),(0,o.iD)("a",{key:0,class:"logout-link",href:"#",onClick:l[1]||(l[1]=(0,s.iM)((e=>(0,i.SU)(n).logout.onClick((0,i.SU)(u))),["prevent"]))},[(0,o.Uk)((0,t.zw)((0,i.SU)(n).logout.name)+" ",1),(0,o.Wm)(r,{icon:["fas","arrow-right-from-bracket"]})])):(0,o.kq)("",!0)]))]),(0,o._)("div",f,[(0,o._)("ul",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,i.SU)(n).items,(e=>((0,o.wg)(),(0,o.j4)(v,{key:e.id,item:e,collapsed:(0,i.SU)(a)},null,8,["item","collapsed"])))),128))])])],2)}}};const y=(0,g.Z)(_,[["__scopeId","data-v-56e2b772"]]);var C=y;const I={class:"app-container"};var D={__name:"App",setup(e){const l=(0,r.tv)(),a=(0,i.iH)(!1);localStorage.setItem("menuCollapsed",JSON.stringify(a.value));const s=()=>{a.value=!a.value,localStorage.setItem("menuCollapsed",JSON.stringify(a.value))},n=(0,o.Fl)((()=>a.value?"calc(100% - 80px)":"calc(100% - 350px)")),c=(0,o.Fl)((()=>a.value?"80px":"350px")),u=(0,o.Fl)((()=>l.currentRoute.value.path));return(e,l)=>{const a=(0,o.up)("router-view");return(0,o.wg)(),(0,o.iD)("div",I,[(0,o._)("div",{class:"menu-container",style:(0,t.j5)({width:c.value})},[((0,o.wg)(),(0,o.j4)(C,{class:"menu",key:u.value,onMenuCollapsed:s}))],4),(0,o._)("div",{class:"content-container",style:(0,t.j5)({width:n.value})},[(0,o.Wm)(a)],4)])}}};const q=(0,g.Z)(D,[["__scopeId","data-v-aa7e4f1e"]]);var H=q,x=a(3494),S=a(7749),F=a(8539);const N=e=>((0,o.dD)("data-v-cded3c34"),e=e(),(0,o.Cn)(),e),A={class:"stellarium"},E=N((()=>(0,o._)("iframe",{src:"https://stellariumtfgweb.onrender.com/",width:"100%",height:"100%"},null,-1))),M=[E];function U(e,l,a,s,t,i){return(0,o.wg)(),(0,o.iD)("div",A,M)}var T={name:"StellariumWeb"};const z=(0,g.Z)(T,[["render",U],["__scopeId","data-v-cded3c34"]]);var O=z,P=a(4161);const Z={style:{color:"black"},class:"container mt-5"},j=(0,o._)("h2",{style:{color:"white"},class:"mb-4"},"Información de Corpos Celestes",-1),L={class:"mb-3 position-relative align-right"},V=(0,o._)("div",{class:"invalid-feedback"},"O término de búsqueda non pode exceder os 30 carácteres.",-1),Y={key:0},R=["onSubmit"],K={class:"mb-3"},$=(0,o._)("label",{for:"titulo",class:"form-label"},"Nome : ",-1),J={class:"mb-3"},W=(0,o._)("label",{for:"contenido",class:"form-label"},"Contido : ",-1),G=(0,o._)("button",{type:"submit",class:"btn btn-outline-light"},"Engadir información",-1),B={key:0,style:{"padding-top":"10px"},class:"success-message"},Q={style:{"margin-top":"20px"}},X={class:"list-group"},ee={class:"publication-header"},le={class:"mb-3"},ae=(0,o._)("hr",{class:"hr"},null,-1),se=["onClick"],oe=["innerHTML"],te=["onClick"],ie=["innerHTML"],ne=["onClick"],re={key:1},ce={class:"list-group"},ue={class:"mb-3"},me=(0,o._)("hr",{class:"hr"},null,-1),de=["innerHTML"],ge=["onClick"],pe=["innerHTML"],ve=["onClick"];var he={__name:"InfoFiguras",setup(e){const l=(0,i.iH)(null!=localStorage.getItem("userToken")),a=(0,i.iH)(!1),n=(0,i.iH)(""),r=(0,i.iH)(""),c=(0,i.iH)([]),u=(0,i.iH)([]),m=(0,i.iH)([]),d=(0,i.iH)({name:"",description:""}),g=async()=>{try{const e=await P.Z.get("http://localhost:8080/stellarium/astros");c.value=e.data,u.value=c.value.reverse(),m.value=u.value,localStorage.setItem("allFigures",JSON.stringify(m.value))}catch(e){console.error("Error al obtener los posts:",e)}},p=async()=>{try{d.value.name=n.value,d.value.description=r.value;await P.Z.post("http://localhost:8080/stellarium/astros/guardar",d.value);a.value=!0,setTimeout((()=>{a.value=!1,g()}),1500),n.value="",r.value=""}catch(e){console.error("Error al crear el post:",e)}},v=e=>{const l=e.description;return l.length<=300||e.showFullContent?l:l.slice(0,300)+"..."},h=e=>{e.showFullContent=!0},w=e=>{e.showFullContent=!1},k=async e=>{try{const l=await P.Z.delete(`http://localhost:8080/stellarium/astros/${e}`);200===l.status?await g():console.error("Error al eliminar la publicación:",l)}catch(l){console.error("Error al eliminar la publicación:",l)}},b=(0,i.iH)("");(0,i.iH)([]);return(0,o.YP)([u,b],(()=>{const e=b.value.toLowerCase();let l=JSON.parse(localStorage.getItem("allFigures"));u.value=""===e?l:l.filter((l=>l.name.toLowerCase().includes(e)))})),(0,o.bv)((()=>{c.value.forEach((e=>{e.showFullContent=!1}))})),(0,o.bv)((()=>{g()})),(e,i)=>{const c=(0,o.up)("font-awesome-icon");return(0,o.wg)(),(0,o.iD)("div",Z,[j,(0,o._)("div",L,[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":i[0]||(i[0]=e=>b.value=e),class:(0,t.C_)(["search-form",{"is-invalid":b.value.length>30}]),placeholder:"Buscar por nome..."},null,2),[[s.nr,b.value]]),(0,o.Wm)(c,{style:{color:"white","margin-left":"5px"},icon:"fa-solid fa-magnifying-glass"}),V]),l.value?((0,o.wg)(),(0,o.iD)("div",Y,[(0,o._)("form",{style:{color:"white"},onSubmit:(0,s.iM)(p,["prevent"])},[(0,o._)("div",K,[$,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":i[1]||(i[1]=e=>n.value=e),id:"titulo",class:"form-control",required:""},null,512),[[s.nr,n.value]])]),(0,o._)("div",J,[W,(0,o.wy)((0,o._)("textarea",{"onUpdate:modelValue":i[2]||(i[2]=e=>r.value=e),id:"contenido",class:"form-control",required:""},null,512),[[s.nr,r.value]])]),G],40,R),a.value?((0,o.wg)(),(0,o.iD)("div",B," Información engadida correctamente! ")):(0,o.kq)("",!0),(0,o._)("div",Q,[(0,o._)("ul",X,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(u.value,((e,a)=>((0,o.wg)(),(0,o.iD)("li",{key:e.id,class:"list-group-item publication-item"},[(0,o._)("div",ee,[(0,o._)("h3",le,(0,t.zw)(e.name),1),ae,l.value?((0,o.wg)(),(0,o.iD)("button",{key:0,onClick:l=>k(e.name),class:"btn btn-outline-danger btn-sm mt-2 red-button"},"Eliminar",8,se)):(0,o.kq)("",!0)]),e.showFullContent?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("pre",{key:0,class:"custom-scrollbar",innerHTML:v(e)},null,8,oe)),!e.showFullContent&&e.description.length>300?((0,o.wg)(),(0,o.iD)("a",{key:1,onClick:l=>h(e),class:"show-more-btn link-black"},"Amosar mais",8,te)):(0,o.kq)("",!0),e.showFullContent?((0,o.wg)(),(0,o.iD)("pre",{key:2,class:"custom-scrollbar",innerHTML:e.description},null,8,ie)):(0,o.kq)("",!0),e.showFullContent?((0,o.wg)(),(0,o.iD)("a",{key:3,onClick:l=>w(e),class:"show-less-btn link-black"},"Amosar menos",8,ne)):(0,o.kq)("",!0)])))),128))])])])):((0,o.wg)(),(0,o.iD)("div",re,[(0,o._)("ul",ce,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(u.value,((e,l)=>((0,o.wg)(),(0,o.iD)("li",{key:e.id,class:"list-group-item publication-item"},[(0,o._)("h3",ue,(0,t.zw)(e.name),1),me,e.showFullContent?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("pre",{key:0,class:"custom-scrollbar",innerHTML:v(e)},null,8,de)),!e.showFullContent&&e.description.length>300?((0,o.wg)(),(0,o.iD)("a",{key:1,onClick:l=>h(e),class:"show-more-btn link-black"},"Amosar mais",8,ge)):(0,o.kq)("",!0),e.showFullContent?((0,o.wg)(),(0,o.iD)("pre",{key:2,class:"custom-scrollbar",innerHTML:e.description},null,8,pe)):(0,o.kq)("",!0),e.showFullContent?((0,o.wg)(),(0,o.iD)("a",{key:3,onClick:l=>w(e),class:"show-less-btn link-black"},"Amosar menos",8,ve)):(0,o.kq)("",!0)])))),128))])]))])}}};const we=he;var ke=we;const be={style:{color:"black"},class:"container mt-5"},fe=(0,o._)("h2",{style:{color:"white"},class:"mb-4"},"Iniciativas e Agrupacións",-1),_e={key:0},ye=["onSubmit"],Ce={class:"mb-3"},Ie=(0,o._)("label",{for:"titulo",class:"form-label"},"Título : ",-1),De={class:"mb-3"},qe=(0,o._)("label",{for:"contenido",class:"form-label"},"Contido : ",-1),He={class:"mb-3"},xe=(0,o._)("label",{for:"imagen1",class:"form-label"},"Imaxes relacionadas : ",-1),Se={class:"custom-file"},Fe=(0,o._)("label",{class:"custom-file-label",for:"imagen1"},"Escolla ficheiros",-1),Ne=(0,o._)("button",{type:"submit",class:"btn btn-outline-light"},"Crear Publicación",-1),Ae={key:0,style:{"padding-top":"10px"},class:"success-message"},Ee={style:{"margin-top":"20px"}},Me={class:"list-group"},Ue={class:"publication-header"},Te={class:"mb-3"},ze=(0,o._)("hr",{class:"hr"},null,-1),Oe=["onClick"],Pe={key:0},Ze=["onClick"],je={key:2},Le=["onClick"],Ve={key:4},Ye=["src","onClick"],Re={key:1},Ke={class:"list-group"},$e={class:"mb-3"},Je=(0,o._)("hr",{class:"hr"},null,-1),We={key:0},Ge=["onClick"],Be={key:2},Qe=["onClick"],Xe={key:4},el=["src","onClick"],ll=["src"];var al={__name:"IniciativasAgrupacions",setup(e){const l=(0,i.iH)(null!=localStorage.getItem("userToken")),a=(0,i.iH)(!1),n=(0,i.iH)(""),r=(0,i.iH)(""),c=(0,i.iH)([]),u=(0,i.iH)([]),m=(0,i.iH)({name:"",description:"",type:"INICIATIVAS_AGRUPACIONS",relatedImages:[]}),d=async()=>{try{const e=await P.Z.get("http://localhost:8080/stellarium/posts/search?type=INICIATIVAS_AGRUPACIONS");c.value=e.data,console.log(c.value),u.value=c.value.reverse(),console.log(u)}catch(e){console.error("Error al obtener los posts:",e)}},g=e=>{const l=e.target.files;m.value.relatedImages=Array.from(l)},p=async()=>{try{const e=m.value.relatedImages.map((e=>new Promise((l=>{const a=new FileReader;a.onload=()=>l(a.result),a.readAsDataURL(e)})))),l=await Promise.all(e),s=l.map((e=>e.replace(/^data:image\/(png|jpeg|jpg);base64,/,"")));m.value.name=n.value,m.value.description=r.value,m.value.relatedImages=s;await P.Z.post("http://localhost:8080/stellarium/posts",m.value);a.value=!0,setTimeout((()=>{a.value=!1,d()}),3e3),n.value="",r.value=""}catch(e){console.error("Error al crear el post:",e)}},v=e=>e.description.length<=300||e.showFullContent?e.description:e.description.slice(0,300)+"...",h=e=>{e.showFullContent=!0},w=e=>{e.showFullContent=!1},k=e=>`data:image/jpeg;base64,${e}`,b=(0,i.iH)(!1),f=(0,i.iH)(""),_=e=>{f.value=e,b.value=!0},y=()=>{f.value="",b.value=!1},C=async e=>{try{const l=await P.Z.delete(`http://localhost:8080/stellarium/posts/${e}`);200===l.status?d():console.error("Error al eliminar la publicación:",l)}catch(l){console.error("Error al eliminar la publicación:",l)}};return(0,o.bv)((()=>{c.value.forEach((e=>{e.showFullContent=!1}))})),(0,o.bv)((()=>{d()})),(e,i)=>((0,o.wg)(),(0,o.iD)("div",be,[fe,l.value?((0,o.wg)(),(0,o.iD)("div",_e,[(0,o._)("form",{style:{color:"white"},onSubmit:(0,s.iM)(p,["prevent"])},[(0,o._)("div",Ce,[Ie,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":i[0]||(i[0]=e=>n.value=e),id:"titulo",class:"form-control",required:""},null,512),[[s.nr,n.value]])]),(0,o._)("div",De,[qe,(0,o.wy)((0,o._)("textarea",{"onUpdate:modelValue":i[1]||(i[1]=e=>r.value=e),id:"contenido",class:"form-control",required:""},null,512),[[s.nr,r.value]])]),(0,o._)("div",He,[xe,(0,o._)("div",Se,[(0,o._)("input",{type:"file",onChange:g,multiple:"",class:"custom-file-input",id:"imagen1"},null,32),Fe])]),Ne],40,ye),a.value?((0,o.wg)(),(0,o.iD)("div",Ae," Post creado correctamente! ")):(0,o.kq)("",!0),(0,o._)("div",Ee,[(0,o._)("ul",Me,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(u.value,((e,a)=>((0,o.wg)(),(0,o.iD)("li",{key:e.id,class:"list-group-item publication-item"},[(0,o._)("div",Ue,[(0,o._)("h3",Te,(0,t.zw)(e.name),1),ze,l.value?((0,o.wg)(),(0,o.iD)("button",{key:0,onClick:l=>C(e.id),class:"btn btn-outline-danger btn-sm mt-2 red-button"},"Eliminar",8,Oe)):(0,o.kq)("",!0)]),e.showFullContent?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("p",Pe,(0,t.zw)(v(e)),1)),!e.showFullContent&&e.description.length>300?((0,o.wg)(),(0,o.iD)("a",{key:1,onClick:l=>h(e),class:"show-more-btn link-black"},"Amosar mais",8,Ze)):(0,o.kq)("",!0),e.showFullContent?((0,o.wg)(),(0,o.iD)("p",je,(0,t.zw)(e.description),1)):(0,o.kq)("",!0),e.showFullContent?((0,o.wg)(),(0,o.iD)("a",{key:3,onClick:l=>w(e),class:"show-less-btn link-black"},"Amosar menos",8,Le)):(0,o.kq)("",!0),e.relatedImages.length>0?((0,o.wg)(),(0,o.iD)("div",Ve,[(0,o._)("div",{class:(0,t.C_)("image-container "+(e.relatedImages.length<=3?"image-container-flex":""))},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.relatedImages,((e,l)=>((0,o.wg)(),(0,o.iD)("div",{key:l,class:"related-image"},[(0,o._)("img",{src:k(e),alt:"Imagen asociada",onClick:l=>_(k(e)),style:{"max-width":"200px","margin-right":"10px"}},null,8,Ye)])))),128))],2)])):(0,o.kq)("",!0)])))),128))])])])):((0,o.wg)(),(0,o.iD)("div",Re,[(0,o._)("ul",Ke,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(u.value,((e,l)=>((0,o.wg)(),(0,o.iD)("li",{key:e.id,class:"list-group-item publication-item"},[(0,o._)("h3",$e,(0,t.zw)(e.name),1),Je,e.showFullContent?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("p",We,(0,t.zw)(v(e)),1)),!e.showFullContent&&e.description.length>300?((0,o.wg)(),(0,o.iD)("a",{key:1,onClick:l=>h(e),class:"show-more-btn link-black"},"Amosar mais",8,Ge)):(0,o.kq)("",!0),e.showFullContent?((0,o.wg)(),(0,o.iD)("p",Be,(0,t.zw)(e.description),1)):(0,o.kq)("",!0),e.showFullContent?((0,o.wg)(),(0,o.iD)("a",{key:3,onClick:l=>w(e),class:"show-less-btn link-black"},"Amosar menos",8,Qe)):(0,o.kq)("",!0),e.relatedImages.length>0?((0,o.wg)(),(0,o.iD)("div",Xe,[(0,o._)("div",{class:(0,t.C_)("image-container "+(e.relatedImages.length<=3?"image-container-flex":""))},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.relatedImages,((e,l)=>((0,o.wg)(),(0,o.iD)("div",{key:l,class:"related-image"},[(0,o._)("img",{src:k(e),alt:"Imagen asociada",onClick:l=>_(k(e)),style:{"max-width":"200px","margin-right":"10px"}},null,8,el)])))),128))],2)])):(0,o.kq)("",!0)])))),128))])])),b.value?((0,o.wg)(),(0,o.iD)("div",{key:2,class:"modal",onClick:y},[(0,o._)("img",{src:f.value,class:"modal-content"},null,8,ll)])):(0,o.kq)("",!0)]))}};const sl=al;var ol=sl;const tl={style:{color:"black"},class:"container mt-5"},il=(0,o._)("h2",{style:{color:"white"},class:"mb-4"},"Curiosidades",-1),nl={key:0},rl=["onSubmit"],cl={class:"mb-3"},ul=(0,o._)("label",{for:"titulo",class:"form-label"},"Título : ",-1),ml={class:"mb-3"},dl=(0,o._)("label",{for:"contenido",class:"form-label"},"Contido : ",-1),gl={class:"mb-3"},pl=(0,o._)("label",{for:"imagen1",class:"form-label"},"Imaxes relacionadas : ",-1),vl={class:"custom-file"},hl=(0,o._)("label",{class:"custom-file-label",for:"imagen1"},"Escolla ficheiros",-1),wl=(0,o._)("button",{type:"submit",class:"btn btn-outline-light"},"Crear Publicación",-1),kl={key:0,style:{"padding-top":"10px"},class:"success-message"},bl={style:{"margin-top":"20px"}},fl={class:"list-group"},_l={class:"publication-header"},yl={class:"mb-3"},Cl=(0,o._)("hr",{class:"hr"},null,-1),Il=["onClick"],Dl={key:0},ql=["onClick"],Hl={key:2},xl=["onClick"],Sl={key:4},Fl=["src","onClick"],Nl={key:1},Al={class:"list-group"},El={class:"mb-3"},Ml=(0,o._)("hr",{class:"hr"},null,-1),Ul={key:0},Tl=["onClick"],zl={key:2},Ol=["onClick"],Pl={key:4},Zl=["src","onClick"],jl=["src"];var Ll={__name:"Curiosidades",setup(e){const l=(0,i.iH)(null!=localStorage.getItem("userToken")),a=(0,i.iH)(!1),n=(0,i.iH)(""),r=(0,i.iH)(""),c=(0,i.iH)([]),u=(0,i.iH)([]),m=(0,i.iH)({name:"",description:"",type:"CURIOSIDADES",relatedImages:[]}),d=async()=>{try{const e=await P.Z.get("http://localhost:8080/stellarium/posts/search?type=CURIOSIDADES");c.value=e.data,console.log(c.value),u.value=c.value.reverse(),console.log(u)}catch(e){console.error("Error al obtener los posts:",e)}},g=e=>{const l=e.target.files;m.value.relatedImages=Array.from(l)},p=async()=>{try{const e=m.value.relatedImages.map((e=>new Promise((l=>{const a=new FileReader;a.onload=()=>l(a.result),a.readAsDataURL(e)})))),l=await Promise.all(e),s=l.map((e=>e.replace(/^data:image\/(png|jpeg|jpg);base64,/,"")));m.value.name=n.value,m.value.description=r.value,m.value.relatedImages=s;await P.Z.post("http://localhost:8080/stellarium/posts",m.value);a.value=!0,setTimeout((()=>{a.value=!1,d()}),3e3),n.value="",r.value=""}catch(e){console.error("Error al crear el post:",e)}},v=e=>e.description.length<=300||e.showFullContent?e.description:e.description.slice(0,300)+"...",h=e=>{e.showFullContent=!0},w=e=>{e.showFullContent=!1},k=e=>`data:image/jpeg;base64,${e}`,b=(0,i.iH)(!1),f=(0,i.iH)(""),_=e=>{f.value=e,b.value=!0},y=()=>{f.value="",b.value=!1},C=async e=>{try{const l=await P.Z.delete(`http://localhost:8080/stellarium/posts/${e}`);200===l.status?d():console.error("Error al eliminar la publicación:",l)}catch(l){console.error("Error al eliminar la publicación:",l)}};return(0,o.bv)((()=>{c.value.forEach((e=>{e.showFullContent=!1}))})),(0,o.bv)((()=>{d()})),(e,i)=>((0,o.wg)(),(0,o.iD)("div",tl,[il,l.value?((0,o.wg)(),(0,o.iD)("div",nl,[(0,o._)("form",{style:{color:"white"},onSubmit:(0,s.iM)(p,["prevent"])},[(0,o._)("div",cl,[ul,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":i[0]||(i[0]=e=>n.value=e),id:"titulo",class:"form-control",required:""},null,512),[[s.nr,n.value]])]),(0,o._)("div",ml,[dl,(0,o.wy)((0,o._)("textarea",{"onUpdate:modelValue":i[1]||(i[1]=e=>r.value=e),id:"contenido",class:"form-control",required:""},null,512),[[s.nr,r.value]])]),(0,o._)("div",gl,[pl,(0,o._)("div",vl,[(0,o._)("input",{type:"file",onChange:g,multiple:"",class:"custom-file-input",id:"imagen1"},null,32),hl])]),wl],40,rl),a.value?((0,o.wg)(),(0,o.iD)("div",kl," Post creado correctamente! ")):(0,o.kq)("",!0),(0,o._)("div",bl,[(0,o._)("ul",fl,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(u.value,((e,a)=>((0,o.wg)(),(0,o.iD)("li",{key:e.id,class:"list-group-item publication-item"},[(0,o._)("div",_l,[(0,o._)("h3",yl,(0,t.zw)(e.name),1),Cl,l.value?((0,o.wg)(),(0,o.iD)("button",{key:0,onClick:l=>C(e.id),class:"btn btn-outline-danger btn-sm mt-2 red-button"},"Eliminar",8,Il)):(0,o.kq)("",!0)]),e.showFullContent?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("p",Dl,(0,t.zw)(v(e)),1)),!e.showFullContent&&e.description.length>300?((0,o.wg)(),(0,o.iD)("a",{key:1,onClick:l=>h(e),class:"show-more-btn link-black"},"Amosar mais",8,ql)):(0,o.kq)("",!0),e.showFullContent?((0,o.wg)(),(0,o.iD)("p",Hl,(0,t.zw)(e.description),1)):(0,o.kq)("",!0),e.showFullContent?((0,o.wg)(),(0,o.iD)("a",{key:3,onClick:l=>w(e),class:"show-less-btn link-black"},"Amosar menos",8,xl)):(0,o.kq)("",!0),e.relatedImages.length>0?((0,o.wg)(),(0,o.iD)("div",Sl,[(0,o._)("div",{class:(0,t.C_)("image-container "+(e.relatedImages.length<=3?"image-container-flex":""))},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.relatedImages,((e,l)=>((0,o.wg)(),(0,o.iD)("div",{key:l,class:"related-image"},[(0,o._)("img",{src:k(e),alt:"Imagen asociada",onClick:l=>_(k(e)),style:{"max-width":"200px","margin-right":"10px"}},null,8,Fl)])))),128))],2)])):(0,o.kq)("",!0)])))),128))])])])):((0,o.wg)(),(0,o.iD)("div",Nl,[(0,o._)("ul",Al,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(u.value,((e,l)=>((0,o.wg)(),(0,o.iD)("li",{key:e.id,class:"list-group-item publication-item"},[(0,o._)("h3",El,(0,t.zw)(e.name),1),Ml,e.showFullContent?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("p",Ul,(0,t.zw)(v(e)),1)),!e.showFullContent&&e.description.length>300?((0,o.wg)(),(0,o.iD)("a",{key:1,onClick:l=>h(e),class:"show-more-btn link-black"},"Amosar mais",8,Tl)):(0,o.kq)("",!0),e.showFullContent?((0,o.wg)(),(0,o.iD)("p",zl,(0,t.zw)(e.description),1)):(0,o.kq)("",!0),e.showFullContent?((0,o.wg)(),(0,o.iD)("a",{key:3,onClick:l=>w(e),class:"show-less-btn link-black"},"Amosar menos",8,Ol)):(0,o.kq)("",!0),e.relatedImages.length>0?((0,o.wg)(),(0,o.iD)("div",Pl,[(0,o._)("div",{class:(0,t.C_)("image-container "+(e.relatedImages.length<=3?"image-container-flex":""))},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.relatedImages,((e,l)=>((0,o.wg)(),(0,o.iD)("div",{key:l,class:"related-image"},[(0,o._)("img",{src:k(e),alt:"Imagen asociada",onClick:l=>_(k(e)),style:{"max-width":"200px","margin-right":"10px"}},null,8,Zl)])))),128))],2)])):(0,o.kq)("",!0)])))),128))])])),b.value?((0,o.wg)(),(0,o.iD)("div",{key:2,class:"modal",onClick:y},[(0,o._)("img",{src:f.value,class:"modal-content"},null,8,jl)])):(0,o.kq)("",!0)]))}};const Vl=Ll;var Yl=Vl;const Rl={style:{color:"black"},class:"container mt-5"},Kl=(0,o._)("h2",{style:{color:"white"},class:"mb-4"},"Arte e Astronomía",-1),$l={key:0},Jl=["onSubmit"],Wl={class:"mb-3"},Gl=(0,o._)("label",{for:"titulo",class:"form-label"},"Título : ",-1),Bl={class:"mb-3"},Ql=(0,o._)("label",{for:"contenido",class:"form-label"},"Contido : ",-1),Xl={class:"mb-3"},ea=(0,o._)("label",{for:"imagen1",class:"form-label"},"Imaxes relacionadas : ",-1),la={class:"custom-file"},aa=(0,o._)("label",{class:"custom-file-label",for:"imagen1"},"Escolla ficheiros",-1),sa=(0,o._)("button",{type:"submit",class:"btn btn-outline-light"},"Crear Publicación",-1),oa={key:0,style:{"padding-top":"10px"},class:"success-message"},ta={style:{"margin-top":"20px"}},ia={class:"list-group"},na={class:"publication-header"},ra={class:"mb-3"},ca=(0,o._)("hr",{class:"hr"},null,-1),ua=["onClick"],ma={key:0},da=["onClick"],ga={key:2},pa=["onClick"],va={key:4},ha=["src","onClick"],wa={key:1},ka={class:"list-group"},ba={class:"mb-3"},fa=(0,o._)("hr",{class:"hr"},null,-1),_a={key:0},ya=["onClick"],Ca={key:2},Ia=["onClick"],Da={key:4},qa=["src","onClick"],Ha=["src"];var xa={__name:"ArteAstronomia",setup(e){const l=(0,i.iH)(null!=localStorage.getItem("userToken")),a=(0,i.iH)(!1),n=(0,i.iH)(""),r=(0,i.iH)(""),c=(0,i.iH)([]),u=(0,i.iH)([]),m=(0,i.iH)({name:"",description:"",type:"ARTE_ASTRONOMIA",relatedImages:[]}),d=async()=>{try{const e=await P.Z.get("http://localhost:8080/stellarium/posts/search?type=ARTE_ASTRONOMIA");c.value=e.data,console.log(c.value),u.value=c.value.reverse(),console.log(u)}catch(e){console.error("Error al obtener los posts:",e)}},g=e=>{const l=e.target.files;m.value.relatedImages=Array.from(l)},p=async()=>{try{const e=m.value.relatedImages.map((e=>new Promise((l=>{const a=new FileReader;a.onload=()=>l(a.result),a.readAsDataURL(e)})))),l=await Promise.all(e),s=l.map((e=>e.replace(/^data:image\/(png|jpeg|jpg);base64,/,"")));m.value.name=n.value,m.value.description=r.value,m.value.relatedImages=s;await P.Z.post("http://localhost:8080/stellarium/posts",m.value);a.value=!0,setTimeout((()=>{a.value=!1,d()}),3e3),n.value="",r.value=""}catch(e){console.error("Error al crear el post:",e)}},v=e=>e.description.length<=300||e.showFullContent?e.description:e.description.slice(0,300)+"...",h=e=>{e.showFullContent=!0},w=e=>{e.showFullContent=!1},k=e=>`data:image/jpeg;base64,${e}`,b=(0,i.iH)(!1),f=(0,i.iH)(""),_=e=>{f.value=e,b.value=!0},y=()=>{f.value="",b.value=!1},C=async e=>{try{const l=await P.Z.delete(`http://localhost:8080/stellarium/posts/${e}`);200===l.status?d():console.error("Error al eliminar la publicación:",l)}catch(l){console.error("Error al eliminar la publicación:",l)}};return(0,o.bv)((()=>{c.value.forEach((e=>{e.showFullContent=!1}))})),(0,o.bv)((()=>{d()})),(e,i)=>((0,o.wg)(),(0,o.iD)("div",Rl,[Kl,l.value?((0,o.wg)(),(0,o.iD)("div",$l,[(0,o._)("form",{style:{color:"white"},onSubmit:(0,s.iM)(p,["prevent"])},[(0,o._)("div",Wl,[Gl,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":i[0]||(i[0]=e=>n.value=e),id:"titulo",class:"form-control",required:""},null,512),[[s.nr,n.value]])]),(0,o._)("div",Bl,[Ql,(0,o.wy)((0,o._)("textarea",{"onUpdate:modelValue":i[1]||(i[1]=e=>r.value=e),id:"contenido",class:"form-control",required:""},null,512),[[s.nr,r.value]])]),(0,o._)("div",Xl,[ea,(0,o._)("div",la,[(0,o._)("input",{type:"file",onChange:g,multiple:"",class:"custom-file-input",id:"imagen1"},null,32),aa])]),sa],40,Jl),a.value?((0,o.wg)(),(0,o.iD)("div",oa," Post creado correctamente! ")):(0,o.kq)("",!0),(0,o._)("div",ta,[(0,o._)("ul",ia,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(u.value,((e,a)=>((0,o.wg)(),(0,o.iD)("li",{key:e.id,class:"list-group-item publication-item"},[(0,o._)("div",na,[(0,o._)("h3",ra,(0,t.zw)(e.name),1),ca,l.value?((0,o.wg)(),(0,o.iD)("button",{key:0,onClick:l=>C(e.id),class:"btn btn-outline-danger btn-sm mt-2 red-button"},"Eliminar",8,ua)):(0,o.kq)("",!0)]),e.showFullContent?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("p",ma,(0,t.zw)(v(e)),1)),!e.showFullContent&&e.description.length>300?((0,o.wg)(),(0,o.iD)("a",{key:1,onClick:l=>h(e),class:"show-more-btn link-black"},"Amosar mais",8,da)):(0,o.kq)("",!0),e.showFullContent?((0,o.wg)(),(0,o.iD)("p",ga,(0,t.zw)(e.description),1)):(0,o.kq)("",!0),e.showFullContent?((0,o.wg)(),(0,o.iD)("a",{key:3,onClick:l=>w(e),class:"show-less-btn link-black"},"Amosar menos",8,pa)):(0,o.kq)("",!0),e.relatedImages.length>0?((0,o.wg)(),(0,o.iD)("div",va,[(0,o._)("div",{class:(0,t.C_)("image-container "+(e.relatedImages.length<=3?"image-container-flex":""))},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.relatedImages,((e,l)=>((0,o.wg)(),(0,o.iD)("div",{key:l,class:"related-image"},[(0,o._)("img",{src:k(e),alt:"Imagen asociada",onClick:l=>_(k(e)),style:{"max-width":"200px","margin-right":"10px"}},null,8,ha)])))),128))],2)])):(0,o.kq)("",!0)])))),128))])])])):((0,o.wg)(),(0,o.iD)("div",wa,[(0,o._)("ul",ka,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(u.value,((e,l)=>((0,o.wg)(),(0,o.iD)("li",{key:e.id,class:"list-group-item publication-item"},[(0,o._)("h3",ba,(0,t.zw)(e.name),1),fa,e.showFullContent?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("p",_a,(0,t.zw)(v(e)),1)),!e.showFullContent&&e.description.length>300?((0,o.wg)(),(0,o.iD)("a",{key:1,onClick:l=>h(e),class:"show-more-btn link-black"},"Amosar mais",8,ya)):(0,o.kq)("",!0),e.showFullContent?((0,o.wg)(),(0,o.iD)("p",Ca,(0,t.zw)(e.description),1)):(0,o.kq)("",!0),e.showFullContent?((0,o.wg)(),(0,o.iD)("a",{key:3,onClick:l=>w(e),class:"show-less-btn link-black"},"Amosar menos",8,Ia)):(0,o.kq)("",!0),e.relatedImages.length>0?((0,o.wg)(),(0,o.iD)("div",Da,[(0,o._)("div",{class:(0,t.C_)("image-container "+(e.relatedImages.length<=3?"image-container-flex":""))},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.relatedImages,((e,l)=>((0,o.wg)(),(0,o.iD)("div",{key:l,class:"related-image"},[(0,o._)("img",{src:k(e),alt:"Imagen asociada",onClick:l=>_(k(e)),style:{"max-width":"200px","margin-right":"10px"}},null,8,qa)])))),128))],2)])):(0,o.kq)("",!0)])))),128))])])),b.value?((0,o.wg)(),(0,o.iD)("div",{key:2,class:"modal",onClick:y},[(0,o._)("img",{src:f.value,class:"modal-content"},null,8,Ha)])):(0,o.kq)("",!0)]))}};const Sa=xa;var Fa=Sa;const Na=e=>((0,o.dD)("data-v-e7b5bc96"),e=e(),(0,o.Cn)(),e),Aa={class:"container"},Ea=Na((()=>(0,o._)("h1",{class:"title"},"Galería de Imaxes",-1))),Ma={key:0,class:"uploadButton"},Ua={class:"modal-content-container"},Ta=["src"],za={class:"button-container"},Oa={class:"image-container"},Pa=["src","onClick"],Za={class:"modal-content"},ja={class:"error-message"};function La(e,l,a,s,i,n){return(0,o.wg)(),(0,o.iD)("div",Aa,[Ea,i.loggedIn?((0,o.wg)(),(0,o.iD)("div",Ma,[(0,o._)("button",{onClick:l[0]||(l[0]=(...e)=>n.uploadImage&&n.uploadImage(...e)),class:"btn btn-outline-light btn-lg mt-5",style:{"margin-bottom":"20px"}},"Subir Imaxe")])):(0,o.kq)("",!0),i.showModal?((0,o.wg)(),(0,o.iD)("div",{key:1,class:"modal",onClick:l[2]||(l[2]=(...e)=>n.closeModal&&n.closeModal(...e))},[(0,o._)("div",Ua,[(0,o._)("img",{src:n.arrayToImage(i.selectedImage.datos),class:"modal-content"},null,8,Ta),(0,o._)("div",za,[i.loggedIn?((0,o.wg)(),(0,o.iD)("button",{key:0,onClick:l[1]||(l[1]=e=>n.eliminarImagen(i.selectedImage.id)),class:"btn btn-danger btn-sm mt-2 red-button"},"Eliminar")):(0,o.kq)("",!0)])])])):(0,o.kq)("",!0),(0,o._)("div",Oa,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.reversedImages,((e,l)=>((0,o.wg)(),(0,o.iD)("div",{key:e.id,class:"image-item"},[(0,o._)("img",{src:n.arrayToImage(e.datos),onClick:l=>n.openModal(e),alt:"imagen"},null,8,Pa)])))),128)),i.errorModal?((0,o.wg)(),(0,o.iD)("div",{key:0,class:"modal error-modal",onClick:l[3]||(l[3]=(...e)=>n.closeErrorModal&&n.closeErrorModal(...e))},[(0,o._)("div",Za,[(0,o._)("p",ja,(0,t.zw)(i.errorMessage),1)])])):(0,o.kq)("",!0)])])}var Va={data(){return{imagenes:[],showModal:!1,selectedImage:null,errorModal:!1,errorMessage:"",loggedIn:!1}},computed:{reversedImages(){return console.log([...this.imagenes].reverse()),[...this.imagenes].reverse()}},created(){this.fetchImages(),this.isLoggedIn()},methods:{async fetchImages(){try{const e=await P.Z.get("http://localhost:8080/stellarium/imagenes");this.imagenes=e.data}catch(e){console.error(e)}},isLoggedIn(){this.loggedIn=null!=localStorage.getItem("userToken")},arrayToImage(e){return`data:image/jpeg;base64,${e}`},openModal(e){this.selectedImage=e,this.showModal=!0},closeModal(){this.showModal=!1},showErrorModal(e){this.errorMessage=e,this.errorModal=!0},closeErrorModal(){this.errorMessage="",this.errorModal=!1},async uploadImage(){try{const e=document.createElement("input");e.type="file",e.accept="image/*",e.addEventListener("change",(async()=>{try{const l=e.files[0],a=new FormData;a.append("archivo",l),await P.Z.post("http://localhost:8080/stellarium/imagenes/guardar",a),this.fetchImages()}catch(l){this.showErrorModal("Error al subir la imagen"),console.error(l)}})),e.click()}catch(e){this.showErrorModal("Error al subir la imagen"),console.error(e)}},async eliminarImagen(e){if(confirm("¿Estás seguro de que deseas eliminar esta imagen?")){console.log(e);try{await P.Z.delete(`http://localhost:8080/stellarium/imagenes/${e}`),this.fetchImages(),this.showModal=!1}catch(l){console.error(l)}}}}};const Ya=(0,g.Z)(Va,[["render",La],["__scopeId","data-v-e7b5bc96"]]);var Ra=Ya;const Ka=e=>((0,o.dD)("data-v-9ea00024"),e=e(),(0,o.Cn)(),e),$a={class:"container mt-5"},Ja={class:"login-container"},Wa=Ka((()=>(0,o._)("h2",{class:"mb-3"},"Iniciar sesión",-1))),Ga={key:0,class:"error-message mb-3"},Ba={class:"mb-3"},Qa=Ka((()=>(0,o._)("label",{for:"username",class:"form-label"},"Nome de usuario:",-1))),Xa={class:"mb-3"},es=Ka((()=>(0,o._)("label",{for:"password",class:"form-label"},"Contrasinal:",-1))),ls=Ka((()=>(0,o._)("button",{type:"submit",class:"btn btn-outline-light"},"Iniciar sesión",-1)));function as(e,l,a,i,n,r){return(0,o.wg)(),(0,o.iD)("div",$a,[(0,o._)("div",Ja,[Wa,n.errorMessage?((0,o.wg)(),(0,o.iD)("div",Ga,(0,t.zw)(n.errorMessage),1)):(0,o.kq)("",!0),(0,o._)("form",{onSubmit:l[2]||(l[2]=(0,s.iM)(((...e)=>r.loginUser&&r.loginUser(...e)),["prevent"]))},[(0,o._)("div",Ba,[Qa,(0,o.wy)((0,o._)("input",{type:"text",id:"username","onUpdate:modelValue":l[0]||(l[0]=e=>n.username=e),class:"form-control",required:""},null,512),[[s.nr,n.username]])]),(0,o._)("div",Xa,[es,(0,o.wy)((0,o._)("input",{type:"password",id:"password","onUpdate:modelValue":l[1]||(l[1]=e=>n.password=e),class:"form-control",required:""},null,512),[[s.nr,n.password]])]),ls],32)])])}var ss={data(){return{username:"",password:"",errorMessage:""}},methods:{async loginUser(){try{const e=await P.Z.post("http://localhost:8080/stellarium/users/login",{userName:this.username,password:this.password}),l=e.data.serviceToken,a=e.data.user.login;console.log(e.data.user),localStorage.setItem("userId",e.data.user.id),localStorage.setItem("userToken",l),localStorage.setItem("userName",a),n.setProfileName(a),this.$emit("profileNameChanged",a),await this.$router.push("/")}catch(e){this.errorMessage="Credenciales incorrectas. Inténtalo de nuevo.",console.error(e)}}}};const os=(0,g.Z)(ss,[["render",as],["__scopeId","data-v-9ea00024"]]);var ts=os;const is={class:"container mt-5"},ns={class:"user-profile"},rs=(0,o._)("h2",null,"User Profile",-1),cs={key:0},us={class:"mb-3"},ms=(0,o._)("strong",null,"Nome de usuario : ",-1),ds={class:"mb-3"},gs=(0,o._)("strong",null,"Nome : ",-1),ps={class:"mb-3"},vs=(0,o._)("strong",null,"Apelidos : ",-1),hs={class:"mb-3"},ws=(0,o._)("strong",null,"Correo electrónico : ",-1),ks={key:1},bs={key:0,style:{"padding-top":"10px",color:"white"}},fs=(0,o._)("h3",null,"Edit Profile",-1),_s=["onSubmit"],ys={class:"mb-3"},Cs=(0,o._)("label",{for:"firstName",class:"form-label"},"First Name:",-1),Is={class:"mb-3"},Ds=(0,o._)("label",{for:"lastName",class:"form-label"},"Last Name:",-1),qs={class:"mb-3"},Hs=(0,o._)("label",{for:"email",class:"form-label"},"Email:",-1),xs=(0,o._)("button",{style:{"margin-right":"10px"},type:"submit",class:"btn btn-dark"},"Save Changes",-1),Ss={key:1,class:"modal",tabindex:"-1",role:"dialog"},Fs={class:"modal-dialog modal-dialog-centered",role:"document"},Ns={class:"modal-content"},As={class:"modal-header"},Es=(0,o._)("h5",{class:"modal-title"},"Crear novo usuario",-1),Ms={class:"modal-body"},Us=["onSubmit"],Ts={class:"mb-3"},zs=(0,o._)("label",{for:"username",class:"form-label"},"Nome de usuario : ",-1),Os={class:"mb-3"},Ps=(0,o._)("label",{for:"firstName",class:"form-label"},"Nome : ",-1),Zs={class:"mb-3"},js=(0,o._)("label",{for:"lastName",class:"form-label"},"Apelidos : ",-1),Ls={class:"mb-3"},Vs=(0,o._)("label",{for:"email",class:"form-label"},"Correo electrónico : ",-1),Ys={class:"mb-3"},Rs=(0,o._)("label",{for:"password",class:"form-label"},"Contrasinal : ",-1),Ks=(0,o._)("button",{type:"submit",class:"btn btn-primary"},"Crear usuario",-1),$s={key:0,style:{"padding-top":"10px"},class:"success-message"};var Js={__name:"Usuario",setup(e){const l=(0,i.iH)(null),a=(0,i.iH)(null),n=(0,i.iH)(null),r=(0,i.iH)(!1),c=(0,i.iH)(null),u=(0,i.iH)(!1),m=()=>{u.value=!0},d=()=>{u.value=!1};(0,o.bv)((()=>{l.value=localStorage.getItem("userId"),a.value=localStorage.getItem("userToken"),g()}));const g=async()=>{try{const e=await P.Z.get(`http://localhost:8080/stellarium/users/usuario-registrado?userId=${l.value}&serviceToken=${a.value}`);n.value=e.data.user,c.value={...n.value}}catch(e){console.error("Error fetching user profile:",e)}},p=async()=>{try{await P.Z.put(`http://localhost:8080/stellarium/users/${l.value}`,{firstName:c.value.firstName,lastName:c.value.lastName,email:c.value.email}),n.value={...c},await g(),r.value=!1}catch(e){console.error("Error updating user profile:",e)}},v=()=>{r.value=!1,c.value={...n.value}},h=(0,i.iH)({login:"",firstName:"",lastName:"",email:"",password:"",role:"ADMIN"}),w=(0,i.iH)(!1),k=async()=>{try{await P.Z.post("http://localhost:8080/stellarium/users/signUp",h.value),h.value={login:"",firstName:"",lastName:"",email:"",password:""},w.value=!0,setTimeout((()=>{w.value=!1,d()}),3e3)}catch(e){console.error("Error creating user:",e)}};return(e,l)=>{const a=(0,o.up)("font-awesome-icon");return(0,o.wg)(),(0,o.iD)("div",is,[(0,o._)("div",ns,[rs,n.value?((0,o.wg)(),(0,o.iD)("div",cs,[(0,o._)("div",us,[ms,(0,o.Uk)(" "+(0,t.zw)(n.value.login),1)]),(0,o._)("div",ds,[gs,(0,o.Uk)(" "+(0,t.zw)(n.value.firstName),1)]),(0,o._)("div",ps,[vs,(0,o.Uk)(" "+(0,t.zw)(n.value.lastName),1)]),(0,o._)("div",hs,[ws,(0,o.Uk)(" "+(0,t.zw)(n.value.email),1)]),(0,o._)("button",{onClick:l[0]||(l[0]=e=>r.value=!0),class:"btn btn-outline-light",style:{"margin-right":"10px"}},"Edit Profile"),(0,o._)("button",{onClick:m,class:"btn btn-outline-light"},"Crear novo usuario")])):((0,o.wg)(),(0,o.iD)("div",ks,[(0,o._)("p",null,[(0,o.Uk)("Loading user data... "),(0,o.Wm)(a,{icon:"spinner",spin:""})])]))]),r.value?((0,o.wg)(),(0,o.iD)("div",bs,[fs,(0,o._)("form",{onSubmit:(0,s.iM)(p,["prevent"])},[(0,o._)("div",ys,[Cs,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":l[1]||(l[1]=e=>c.value.firstName=e),id:"firstName",class:"form-control",required:""},null,512),[[s.nr,c.value.firstName]])]),(0,o._)("div",Is,[Ds,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":l[2]||(l[2]=e=>c.value.lastName=e),id:"lastName",class:"form-control",required:""},null,512),[[s.nr,c.value.lastName]])]),(0,o._)("div",qs,[Hs,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":l[3]||(l[3]=e=>c.value.email=e),id:"email",class:"form-control",required:""},null,512),[[s.nr,c.value.email]])]),xs,(0,o._)("button",{onClick:v,class:"btn btn-secondary"},"Cancel")],40,_s)])):(0,o.kq)("",!0),u.value?((0,o.wg)(),(0,o.iD)("div",Ss,[(0,o._)("div",Fs,[(0,o._)("div",Ns,[(0,o._)("div",As,[Es,(0,o._)("button",{type:"button",class:"btn btn-light",onClick:d,"aria-label":"Close"},[(0,o.Wm)(a,{icon:"fa-solid fa-xmark"})])]),(0,o._)("div",Ms,[(0,o._)("div",null,[(0,o._)("form",{onSubmit:(0,s.iM)(k,["prevent"])},[(0,o._)("div",Ts,[zs,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":l[4]||(l[4]=e=>h.value.login=e),id:"username",class:"form-control",required:""},null,512),[[s.nr,h.value.login]])]),(0,o._)("div",Os,[Ps,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":l[5]||(l[5]=e=>h.value.firstName=e),id:"firstName",class:"form-control",required:""},null,512),[[s.nr,h.value.firstName]])]),(0,o._)("div",Zs,[js,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":l[6]||(l[6]=e=>h.value.lastName=e),id:"lastName",class:"form-control",required:""},null,512),[[s.nr,h.value.lastName]])]),(0,o._)("div",Ls,[Vs,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":l[7]||(l[7]=e=>h.value.email=e),id:"email",class:"form-control",required:""},null,512),[[s.nr,h.value.email]])]),(0,o._)("div",Ys,[Rs,(0,o.wy)((0,o._)("input",{type:"password","onUpdate:modelValue":l[8]||(l[8]=e=>h.value.password=e),id:"password",class:"form-control",required:""},null,512),[[s.nr,h.value.password]])]),Ks],40,Us)]),w.value?((0,o.wg)(),(0,o.iD)("div",$s," Novo usuario creado correctamente! ")):(0,o.kq)("",!0)])])])])):(0,o.kq)("",!0)])}}};const Ws=Js;var Gs=Ws;const Bs=[{path:"/inicio",name:"Inicio",component:O},{path:"/",name:"/",component:O},{path:"/info-figuras",name:"InfoFiguras",component:ke},{path:"/iniciativas",name:"IniciativasAgrupacions",component:ol},{path:"/curiosidades",name:"Curiosidades",component:Yl},{path:"/arte-astronomia",name:"ArteAstronomia",component:Fa},{path:"/galeria-imaxes",name:"GaleriaImaxes",component:Ra},{path:"/administracion",name:"Administracion",component:ts},{path:"/usuario",name:"Usuario",component:Gs}],Qs=(0,r.p7)({history:(0,r.PO)(),routes:Bs});Qs.beforeEach(((e,l,a)=>{e.meta.requiresAuth&&!localStorage.getItem("userToken")?a("/administracion"):a()}));var Xs=Qs;x.vI.add(F.BC0),x.vI.add(F.xiG),x.vI.add(F.Rpv),x.vI.add(F.ZUQ),x.vI.add(F.eDR),x.vI.add(F.DBf),x.vI.add(F.iOm),x.vI.add(F.FDd),x.vI.add(F.DBF),x.vI.add(F.l9f),x.vI.add(F.ILF),x.vI.add(F.SJh),x.vI.add(F.LM3),x.vI.add(F.g82),x.vI.add(F.Vui),x.vI.add(F.Y$T),(0,s.ri)(H).use(Xs).component("font-awesome-icon",S.GN).mount("#app")}},l={};function a(s){var o=l[s];if(void 0!==o)return o.exports;var t=l[s]={exports:{}};return e[s].call(t.exports,t,t.exports,a),t.exports}a.m=e,function(){var e=[];a.O=function(l,s,o,t){if(!s){var i=1/0;for(u=0;u<e.length;u++){s=e[u][0],o=e[u][1],t=e[u][2];for(var n=!0,r=0;r<s.length;r++)(!1&t||i>=t)&&Object.keys(a.O).every((function(e){return a.O[e](s[r])}))?s.splice(r--,1):(n=!1,t<i&&(i=t));if(n){e.splice(u--,1);var c=o();void 0!==c&&(l=c)}}return l}t=t||0;for(var u=e.length;u>0&&e[u-1][2]>t;u--)e[u]=e[u-1];e[u]=[s,o,t]}}(),function(){a.n=function(e){var l=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(l,{a:l}),l}}(),function(){a.d=function(e,l){for(var s in l)a.o(l,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:l[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,l){return Object.prototype.hasOwnProperty.call(e,l)}}(),function(){var e={143:0};a.O.j=function(l){return 0===e[l]};var l=function(l,s){var o,t,i=s[0],n=s[1],r=s[2],c=0;if(i.some((function(l){return 0!==e[l]}))){for(o in n)a.o(n,o)&&(a.m[o]=n[o]);if(r)var u=r(a)}for(l&&l(s);c<i.length;c++)t=i[c],a.o(e,t)&&e[t]&&e[t][0](),e[t]=0;return a.O(u)},s=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];s.forEach(l.bind(null,0)),s.push=l.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(9694)}));s=a.O(s)})();
//# sourceMappingURL=app.34ff7781.js.map